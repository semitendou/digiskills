<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latest Cyber News - Digital Skills for All</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #1A365D;
            background: #FEFEFE;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #1A365D 0%, #2D5A8C 100%);
            color: white;
            padding: 1.5rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

            .nav-links a {
                color: white;
                text-decoration: none;
                transition: opacity 0.3s;
            }

                .nav-links a:hover {
                    opacity: 0.8;
                }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 3rem 2rem;
            background: linear-gradient(to bottom, #FAF9F6 0%, #FFFFFF 100%);
            border-bottom: 2px solid #E2E8F0;
        }

            .hero h1 {
                font-size: 2.5rem;
                margin-bottom: 0.5rem;
                color: #1A365D;
            }

            .hero p {
                font-size: 1.1rem;
                color: #4A5568;
                max-width: 700px;
                margin: 0 auto;
            }

        /* Main Content */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 3rem;
            color: #4A5568;
            font-size: 1.1rem;
        }

        .loading-spinner {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 4px solid #E2E8F0;
            border-top-color: #4ECDC4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 0.5rem;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Error State */
        .error {
            background: #FED7D7;
            border: 2px solid #FC8181;
            color: #C53030;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        /* News Grid */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .news-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            flex-direction: column;
            border-top: 4px solid #4ECDC4;
        }

            .news-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            }

            .news-card.threat {
                border-top-color: #FF6B6B;
            }

            .news-card.update {
                border-top-color: #667eea;
            }

            .news-card.nz {
                border-top-color: #FDB750;
            }

        .news-image {
            width: 100%;
            height: 180px;
            background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: white;
        }

        .news-card.threat .news-image {
            background: linear-gradient(135deg, #FF6B6B 0%, #E85A5A 100%);
        }

        .news-card.update .news-image {
            background: linear-gradient(135deg, #667eea 0%, #5568d3 100%);
        }

        .news-card.nz .news-image {
            background: linear-gradient(135deg, #FDB750 0%, #F5A623 100%);
        }

        .news-content {
            padding: 1.5rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .news-source {
            font-size: 0.85rem;
            color: #718096;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .news-card h3 {
            font-size: 1.2rem;
            margin-bottom: 0.8rem;
            color: #1A365D;
            line-height: 1.4;
            flex-grow: 1;
        }

        .news-card p {
            color: #4A5568;
            font-size: 0.95rem;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .news-date {
            font-size: 0.85rem;
            color: #A0AEC0;
            margin-bottom: 1rem;
        }

        .news-link {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background: #4ECDC4;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: background 0.3s;
            align-self: flex-start;
        }

        .news-card.threat .news-link {
            background: #FF6B6B;
        }

            .news-card.threat .news-link:hover {
                background: #E85A5A;
            }

        .news-card.update .news-link {
            background: #667eea;
        }

            .news-card.update .news-link:hover {
                background: #5568d3;
            }

        .news-card.nz .news-link {
            background: #FDB750;
        }

            .news-card.nz .news-link:hover {
                background: #F5A623;
            }

        .news-link:hover {
            background: #3DB8B0;
        }

        /* Filter Buttons */
        .filter-section {
            margin-bottom: 2rem;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 0.75rem 1.5rem;
            border: 2px solid #E2E8F0;
            background: white;
            color: #1A365D;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

            .filter-btn:hover,
            .filter-btn.active {
                background: #4ECDC4;
                color: white;
                border-color: #4ECDC4;
            }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #4A5568;
        }

            .empty-state p {
                font-size: 1.1rem;
            }

        /* Load More Button */
        .load-more-section {
            text-align: center;
            margin: 3rem 0;
        }

        .load-more-btn {
            padding: 1rem 2rem;
            background: #4ECDC4;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

            .load-more-btn:hover {
                background: #3DB8B0;
                transform: translateY(-2px);
            }

            .load-more-btn:disabled {
                background: #A0AEC0;
                cursor: not-allowed;
                transform: none;
            }

        /* Footer */
        footer {
            background: #1A365D;
            color: white;
            padding: 3rem 2rem 1rem;
            margin-top: 4rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            margin-bottom: 1rem;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section a {
            color: #B8D4E8;
            text-decoration: none;
            display: block;
            margin-bottom: 0.5rem;
        }

            .footer-section a:hover {
                color: white;
            }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #2D5A8C;
            color: #B8D4E8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 1.8rem;
            }

            .nav-links {
                display: none;
            }

            .news-grid {
                grid-template-columns: 1fr;
            }

            .filter-section {
                justify-content: flex-start;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                🛡️💡 Digital Skills for All
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="resources.html">Resources</a></li>
                <li><a href="glossary.html">Glossary</a></li>
                <li><a href="contact.html">Contact Us</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero">
        <h1>📰 Latest Cyber News</h1>
        <p>Stay informed with the latest cybersecurity threats, scam alerts, and digital safety updates</p>
    </section>

    <div class="container">
        <div class="filter-section">
            <button class="filter-btn active" onclick="filterNews('all')">All News</button>
            <button class="filter-btn" onclick="filterNews('threat')">🚨 Threats</button>
            <button class="filter-btn" onclick="filterNews('update')">🔄 Updates</button>
            <button class="filter-btn" onclick="filterNews('nz')">🇳🇿 NZ News</button>
        </div>

        <div id="newsContainer" class="news-grid">
            <div class="loading">
                <div class="loading-spinner"></div>
                Loading latest news...
            </div>
        </div>

        <div class="load-more-section">
            <button id="loadMoreBtn" class="load-more-btn" onclick="loadMoreNews()">Load More News</button>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>About</h3>
                <ul>
                    <li><a href="#about">Our Mission</a></li>
                    <li><a href="#team">Our Team</a></li>
                    <li><a href="#partners">Partners</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Resources</h3>
                <ul>
                    <li><a href="resources.html">Resources</a></li>
                    <li><a href="glossary.html">Glossary</a></li>
                    <li><a href="#guides">Downloadable Guides</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Support</h3>
                <ul>
                    <li><a href="#contact">Contact Us</a></li>
                    <li><a href="#faq">FAQ</a></li>
                    <li><a href="#accessibility">Accessibility</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Legal</h3>
                <ul>
                    <li><a href="#privacy">Privacy Policy</a></li>
                    <li><a href="#terms">Terms of Use</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Digital Skills for All. Empowering digital confidence for everyone.</p>
        </div>
    </footer>

    <script>
        let allNews = [];
        let displayedNews = [];
        let currentPage = 1;
        let itemsPerPage = 12;
        let currentFilter = 'all';

        // Sample news data to ensure something displays
        const sampleNews = [
            {
                title: "Major Data Breach Affects Millions - What You Need to Know",
                description: "A significant data breach has exposed personal information. Learn how to protect yourself and check if you're affected.",
                url: "https://www.bbc.com/news",
                source: { name: "Security News" },
                publishedAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
                category: "threat",
                emoji: "🚨"
            },
            {
                title: "New Phishing Scam Targeting Online Banking Users",
                description: "Cybercriminals are using sophisticated phishing tactics to steal banking credentials. Here's how to stay safe.",
                url: "https://www.securityweek.com",
                source: { name: "Security Week" },
                publishedAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
                category: "threat",
                emoji: "🚨"
            },
            {
                title: "New Zealand Alert: Local Businesses Targeted by Ransomware",
                description: "NZ tech sector warns of increased ransomware attacks. Netsafe provides guidance for protection.",
                url: "https://www.netsafe.org.nz",
                source: { name: "Netsafe NZ" },
                publishedAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
                category: "nz",
                emoji: "🇳🇿"
            },
            {
                title: "Microsoft Releases Critical Security Updates",
                description: "Update your Windows systems immediately with latest security patches to protect against vulnerabilities.",
                url: "https://www.microsoft.com",
                source: { name: "Microsoft Security" },
                publishedAt: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString(),
                category: "update",
                emoji: "🔄"
            },
            {
                title: "Report: Online Shopping Scams Increase During Holiday Season",
                description: "Consumer protection warns of fake online stores. Tips to verify legitimate retailers before shopping.",
                url: "https://www.consumer.org.nz",
                source: { name: "Consumer NZ" },
                publishedAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
                category: "nz",
                emoji: "🇳🇿"
            },
            {
                title: "Credential Stuffing Attacks Surge - Change Your Passwords Now",
                description: "Hackers using stolen passwords to access accounts. Use unique, strong passwords for each service.",
                url: "https://www.infosecurity-magazine.com",
                source: { name: "Infosecurity" },
                publishedAt: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString(),
                category: "threat",
                emoji: "🚨"
            },
            {
                title: "Apple Releases iOS Security Update for All Users",
                description: "Important security patches now available for iPhone, iPad, and Mac devices worldwide.",
                url: "https://www.apple.com",
                source: { name: "Apple Security" },
                publishedAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
                category: "update",
                emoji: "🔄"
            },
            {
                title: "Social Media Misinformation Campaign Targets NZ Elections",
                description: "Be aware of false information on social platforms. Check official sources before sharing.",
                url: "https://www.dia.govt.nz",
                source: { name: "DIA NZ" },
                publishedAt: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString(),
                category: "nz",
                emoji: "🇳🇿"
            },
            {
                title: "Email Security Best Practices - Protect Your Inbox",
                description: "Learn how to recognize suspicious emails, enable two-factor authentication, and secure your email account.",
                url: "https://www.cyber-security-news.com",
                source: { name: "Cyber Security" },
                publishedAt: new Date(Date.now() - 9 * 24 * 60 * 60 * 1000).toISOString(),
                category: "update",
                emoji: "🔄"
            },
            {
                title: "CEO Fraud Scams Cost Businesses Millions",
                description: "Attackers impersonate executives to steal money. Employee training is key to prevention.",
                url: "https://www.threatpost.com",
                source: { name: "Threatpost" },
                publishedAt: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString(),
                category: "threat",
                emoji: "🚨"
            },
            {
                title: "NZ Privacy Commissioner Warns About Data Collection Practices",
                description: "Review your privacy settings on apps and websites. You have rights over your personal data.",
                url: "https://www.privacy.org.nz",
                source: { name: "Privacy Commission NZ" },
                publishedAt: new Date(Date.now() - 11 * 24 * 60 * 60 * 1000).toISOString(),
                category: "nz",
                emoji: "🇳🇿"
            },
            {
                title: "Dark Web Marketplace Shut Down by Law Enforcement",
                description: "International operation takes down illegal marketplace. Criminals arrested worldwide.",
                url: "https://www.europol.europa.eu",
                source: { name: "Law Enforcement" },
                publishedAt: new Date(Date.now() - 12 * 24 * 60 * 60 * 1000).toISOString(),
                category: "threat",
                emoji: "🚨"
            },
            {
                title: "Google Introduces New Security Features for Chrome",
                description: "Enhanced protection against malicious websites and tracking. Update your browser today.",
                url: "https://www.google.com",
                source: { name: "Google Security" },
                publishedAt: new Date(Date.now() - 13 * 24 * 60 * 60 * 1000).toISOString(),
                category: "update",
                emoji: "🔄"
            },
            {
                title: "Cryptocurrency Scams Target New Zealand Investors",
                description: "Fake investment schemes promise unrealistic returns. Verify legitimacy before investing any money.",
                url: "https://www.netsafe.org.nz",
                source: { name: "Netsafe NZ" },
                publishedAt: new Date(Date.now() - 14 * 24 * 60 * 60 * 1000).toISOString(),
                category: "nz",
                emoji: "🇳🇿"
            },
            {
                title: "Two-Factor Authentication - Why You Need It Now",
                description: "Enable 2FA on all important accounts for an extra layer of security against unauthorized access.",
                url: "https://www.security-awareness.com",
                source: { name: "Security Awareness" },
                publishedAt: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString(),
                category: "update",
                emoji: "🔄"
            }
        ];

        async function fetchNews() {
            try {
                // NewsAPI.org key for live news fetching
                const API_KEY = 'e9d48439d069456bb92e19b7681ac017';

                if (API_KEY === 'YOUR_API_KEY_HERE') {
                    console.log('⚠️ API Key not set! Using sample news.');
                    console.log('To get live news:');
                    console.log('1. Sign up free at https://newsapi.org');
                    console.log('2. Copy your API key');
                    console.log('3. Replace "YOUR_API_KEY_HERE" in the code with your key');
                    allNews = sampleNews;
                    currentPage = 1;
                    displayedNews = [];
                    loadMoreNews();
                    return;
                }

                const queries = [
                    'cybersecurity',
                    'data breach',
                    'online scam',
                    'phishing',
                    'ransomware',
                    'digital security'
                ];

                let fetchedNews = [];

                for (const query of queries) {
                    try {
                        const response = await fetch(
                            `https://newsapi.org/v2/everything?q=${encodeURIComponent(query)}&sortBy=publishedAt&language=en&pageSize=20&apiKey=${API_KEY}`
                        );

                        if (response.ok) {
                            const data = await response.json();
                            if (data.articles) {
                                fetchedNews = [...fetchedNews, ...data.articles.map(article => ({
                                    title: article.title,
                                    description: article.description || 'Read more about this cybersecurity news.',
                                    url: article.url,
                                    publishedAt: article.publishedAt,
                                    source: article.source
                                }))];
                            }
                        }
                    } catch (e) {
                        console.log('Error fetching:', query);
                    }
                }

                if (fetchedNews.length > 0) {
                    allNews = fetchedNews.map(article => ({
                        ...article,
                        category: categorizeNews(article.title + ' ' + (article.description || '')),
                        emoji: getEmoji(categorizeNews(article.title + ' ' + (article.description || '')))
                    }))
                        .filter(item => item.url && item.title)
                        .sort((a, b) => new Date(b.publishedAt) - new Date(a.publishedAt));

                    // Remove duplicates
                    allNews = Array.from(new Map(allNews.map(item => [item.url, item])).values());

                    console.log(`✅ Loaded ${allNews.length} live news articles`);
                } else {
                    console.log('No articles found. Using sample news.');
                    allNews = sampleNews;
                }

                currentPage = 1;
                displayedNews = [];
                loadMoreNews();
            } catch (error) {
                console.error('Error fetching news:', error);
                allNews = sampleNews;
                currentPage = 1;
                displayedNews = [];
                loadMoreNews();
            }
        }

        function categorizeNews(text) {
            const lowerText = text.toLowerCase();
            if (lowerText.includes('threat') || lowerText.includes('attack') || lowerText.includes('malware') || lowerText.includes('ransomware')) {
                return 'threat';
            }
            if (lowerText.includes('new zealand') || lowerText.includes('nz') || lowerText.includes('aotearoa')) {
                return 'nz';
            }
            return 'update';
        }

        function getEmoji(category) {
            const emojis = {
                threat: '🚨',
                nz: '🇳🇿',
                update: '🔄'
            };
            return emojis[category] || '📰';
        }

        function loadMoreNews() {
            const filtered = currentFilter === 'all' ? allNews : allNews.filter(n => n.category === currentFilter);
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = currentPage * itemsPerPage;
            const newArticles = filtered.slice(startIndex, endIndex);

            displayedNews = [...displayedNews, ...newArticles];

            if (displayedNews.length === 0) {
                document.getElementById('newsContainer').innerHTML = `
                        <div class="empty-state" style="grid-column: 1/-1;">
                            <p>No news found. Check back soon!</p>
                        </div>
                    `;
                document.getElementById('loadMoreBtn').style.display = 'none';
                return;
            }

            displayNewsArticles(displayedNews);

            // Update load more button
            const loadMoreBtn = document.getElementById('loadMoreBtn');
            if (endIndex >= filtered.length) {
                loadMoreBtn.disabled = true;
                loadMoreBtn.textContent = 'No More News to Load';
            } else {
                loadMoreBtn.disabled = false;
                loadMoreBtn.textContent = `Load More News (${filtered.length - endIndex} remaining)`;
            }

            currentPage++;
        }

        function displayNewsArticles(news) {
            if (news.length === 0) {
                document.getElementById('newsContainer').innerHTML = `
                        <div class="empty-state" style="grid-column: 1/-1;">
                            <p>No news found. Check back soon!</p>
                        </div>
                    `;
                return;
            }

            const html = news.map(article => `
                    <div class="news-card ${article.category}">
                        <div class="news-image">${article.emoji}</div>
                        <div class="news-content">
                            <div class="news-source">${new URL(article.url).hostname.replace('www.', '')}</div>
                            <h3>${article.title}</h3>
                            <p>${article.description || 'Read more about this important cybersecurity news.'}</p>
                            <div class="news-date">${new Date(article.publishedAt).toLocaleDateString('en-NZ', { year: 'numeric', month: 'short', day: 'numeric' })}</div>
                            <a href="${article.url}" target="_blank" rel="noopener noreferrer" class="news-link">Read Full Story →</a>
                        </div>
                    </div>
                `).join('');

            document.getElementById('newsContainer').innerHTML = html;
        }

        function filterNews(category) {
            // Update button states
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Reset pagination
            currentFilter = category;
            currentPage = 1;
            displayedNews = [];
            loadMoreNews();
        }

        // Fetch news on page load
        fetchNews();

        // Refresh news every 30 minutes
        setInterval(fetchNews, 30 * 60 * 1000);
    </script>
</body>
</html>